<template>	<view class="container">		<!-- #ifdef APP-PLUS -->		<view class="status_bar">			<view class="top_view"></view>		</view>		<!-- #endif -->		<view class="flex flex__between bg_ff top">		<navigator open-type="navigateBack" class="back-box">			<text class="iconfont icon-un-return-o c_ff"></text>		</navigator>		<view>详情</view>		<text @click="shareShow=true" class="iconfont icon-fenxiang fs_44 share flex__end"></text>		</view>		<view class="share_bg" v-show="shareShow" @click="shareShow=false">			<view class="share_btn ta_c">				<view>分享</view>				<view class="flex__around__center" style="margin-top: 65upx;">					<view @click.stop="shareToFriends()">						<image src="../../static/images/wechat.png"></image>						<view>微信好友</view>					</view>					<view @click.stop="shareCircle()">						<image src="../../static/images/circle.png"></image>						<view>朋友圈</view>					</view> 				</view>			</view>		</view>		<!-- 个人信息 -->		<view class="flex__between__center p_lr_30 p_tb_40 shadow" @click="toHomepage(post.user_id)">			<view class="flex align-center">				<image :src="post.avatar" class="head"></image>				<view class="c_00 fs_28 ml_30">{{post.nickname}}</view>			</view>			<!-- // 0互相不关注 1我关注了她 2他关注了我 3互关			if(this.info.follow_count==0&&this.info.follow_count==2){//加关注 -->			<view class="ta_c" @click="memberInter()" :class="info.follow_count==0||info.follow_count==2?'colors_btn c_ff':'grey_btn c_98'">{{info.follow_count==1?'已关注':info.follow_count==3?'互相关注':'+关注'}}</view>		</view>		<!-- 轮播图 -->		<view class="swiper-box p_re" v-if="carousel.length||post.video_url">			<video v-if="post.is_has_video==1&&active==0" :src="post.video_url" autoplay="autoplay" style="width:100%;height: 500upx;"></video>			<swiper v-else indicator-dots="true" autoplay="true" circular="true" indicator-active-color="#ffffff">				<swiper-item v-for="(item,index) in carousel" :key="index">					<image :src="item"></image>					 <!-- @click="getDetails(item.link_url)" -->				</swiper-item>			</swiper>			<!-- <cover-view class="flex change_img ta_c fs_24" style="z-index:999999">				<cover-view v-if="post.is_has_video==1&&test" class=" p_ab change_img" :class="active==0?'c_4d bg_ff':'c_ff'" @click="changeActive(0)">视频</cover-view>				<cover-view v-if="post.is_has_video==1&&test" class="cover-item p_ab change_img2" :class="active==1?'c_4d bg_ff':'c_ff'" @click="changeActive(1)">照片</cover-view>			</cover-view> -->		</view>				<view class="flex change_img_view ta_c fs_24" v-if="post.is_has_video==1&&carousel.length">			<view v-if="post.is_has_video==1" :class="active==0?'c_4d bg_ff':'c_ff'" @click="changeActive(0)">视频</view>			<view v-if="post.is_has_video==1" :class="active==1?'c_4d bg_ff':'c_ff'" @click="changeActive(1)">照片</view>		</view>		<!-- 信息 -->		<view class="p_lr_30">			<view class="title fs_28">{{post.name}}</view>			<view class="topic fs_28 flex">				<view class="flex" v-for="(item2,index2) in post.caterelation" :key="index2">					<view class="label_items" v-for="(item3,index4) in item2.cate" :key="index3"  @click="toTopic" v-bind:id="item3.id">#{{item3.name}}</view>				</view>			</view>			<view class="mt_25 fs_22 c_A4A9B3 lh_40">{{post.create_time}}</view>			<rich-text class="mt_25 line-40 c_414852 describe bb_ed" :nodes="post.content"></rich-text>			<!-- 评论 -->			<view class="flex comment_item" v-for="(item,index) in list" :key="index">				<image class="head no_shrink" :src="item.avatar" @click="toHomepage(item.user_id)"></image>				<view class="ml_20 bb_ed pb_20 flex_1">					<view class="fs_26 c_66 line-35" @click="toHomepage(item.user_id)">{{item.nickname}}</view>					<view class="mt_15 line-40 fs_28 c_1a">{{item.content}}</view>					 <!-- v-bind:id="item.id" -->					<view class="bg_f7 c_66 fs_26 mt_25 align-center" v-if="item.review_count" @click="toReplay(item.id)">						<text>{{item.first_name}}</text>						<text class="ect">等人</text>						<text class="c_989BF9">共{{item.review_count}}条回复</text>						<text class="iconfont icon-jiantou fs_22"></text>					</view>					<view class="flex__between mt_25" @click="toReplay(item.id)">						<text class="fs_20">{{item.create_time}}</text>						<text class="iconfont icon-huifu"></text>					</view>				</view>			</view>		</view>		<!-- footer -->		<view class="flex footer align-center">			<input  			  name="search" 			  type='text' 			  confirm-type="search" 			  @confirm="bindConfirm"  			  v-model="content"			  bindinput='bindinput' class="comment_input" placeholder="说点什么呢…" />			<!-- <input v-model="content" @focus="commentBtnshow=true" type="text" class="comment_input" placeholder="说点什么呢…" /> -->			<!-- <button v-show="commentBtnshow" @click="CommentNews" class="flex_1 comment_btn">评论</button> -->			 <!-- v-show="!commentBtnshow" -->			<view class="flex">				<view class="ml_40 ta_c" @click="Praise()">					<text  class="iconfont" :class="info.praise_is?'c_pur icon-gouzhua':'c_f5 icon-claws'"></text>					<view class="fs_20 c_1a mt_5">{{info.praise_count||0}}</view>				</view>				<view class="ml_50 ta_c" @click="Collect()">					<text class="iconfont " :class="info.collect_is?'c_pur icon-xingxing':'c_f5 icon-shoucang'"></text>					<view class="fs_20 c_1a mt_5">{{info.collect_count||0}}</view>				</view>				<view class="ml_50 ta_c">					<text class="iconfont icon-huifu"></text>					<view class="fs_20 c_1a mt_5">{{info.review_count||0}}</view>				</view>				</view>		</view>	</view></template><script>	import {uniLoadMore} from '@dcloudio/uni-ui'	const app=getApp();	export default {		data(){			return{				active:0,				carousel: [],				list:[],				post:{},				info:{},				id:'',				active:0,				shareShow:false,				content:'',				commentBtnshow:false,//评论按钮				test:true			}		},		methods:{
			toTopic(e){
				// console.log(e.target.id;
				uni.navigateTo({
					url:"./topic?id="+e.target.id
				})
			},			changeActive(index){				this.active = index;				// let that = this;				// if(this.active==0){				// 	this.test = false;				// 	setTimeout(function(){				// 		that.test = true				// 	},80)				// }				// this.loadDetail();			},			toHomepage(id){			  // let id = e.currentTarget.id;			  uni.navigateTo({				url:"./homepage?id="+id			  })			},			toReplay(id){				console.log(id);				uni.navigateTo({					'url': './reply?id='+id				})			},			// 加载商品			loadList(page){				app.$vm.getList({					url:'News/getReviewList',					that: this,					data: {news_id:this.id},					loading: 1,					page				});			},						// 关注与取关			memberInter(){				// console.log(this.info);				// return false;				// 0互相不关注 1我关注了她 2他关注了我 3互关				if(this.info.follow_count==0||this.info.follow_count==2){//加关注					app.$vm.getData({						url: 'News/memberInter',						that: this,						data: {info_id:this.id},						loading: 1					}).then(res => {						if (res.code == 1) {							this.loadDetail();						} else {							uni.showToast({								title: res.message,								icon: 'none'							})						}  					});				}else{//取消关注					app.$vm.getData({						url: 'News/removememberInter',						that: this,						data: {info_id:this.id},						loading: 1					}).then(res => {						if (res.code == 1) {							this.loadDetail();						} else {							uni.showToast({								title: res.message,								icon: 'none'							})						}  					});				}			},			loadDetail(){				app.$vm.getData({					url: 'News/getNewsDetail',					that: this,					data: {						id: this.id,					},					loading: 1				}).then(res => {					if (res.code == 1) {						this.info = res.data;						this.post = res.data.news;						this.carousel = res.data.news.img_path;						// this.comment=res.data.					} else {						uni.showToast({							title: res.message,							icon: 'none'						})					}  				});			},			// 点赞			Praise(){				// 0未点赞 1已经点赞 				let flag = this.info.praise_is;				if(flag){//点赞了（取消点赞					app.$vm.getData({						url: 'News/RemoveNewsPraise',						that: this,						data: {news_id:this.  id},						loading: 1					}).then(res => {						if (res.code == 1) {							uni.showToast({title: res.message,icon: 'none'});							this.info.praise_is = 0;							this.info.praise_count -= 1;						} else {							uni.showToast({title: res.message,icon: 'none'});						}					});				}else{//未点赞（点赞操作					app.$vm.getData({						url: 'News/newsPraise',						that: this,						data: {news_id: this.id},						loading: 1					}).then(res => {						if (res.code == 1) {							uni.showToast({title: res.message,icon: 'none'});							this.info.praise_is = 1;							this.info.praise_count += 1;						} else {							uni.showToast({title: res.message,icon: 'none'});						}					});				}			},			// 收藏			Collect(){ 				// ata.collect_is/ 0未收藏 1 已收藏				let flag = this.info.collect_is;				if(flag){//收藏了（取消收藏					app.$vm.getData({						url: 'News/collectCancel',						that: this,						data: {news_id: this.id},						loading: 1					}).then(res => {						if (res.code == 1) {							uni.showToast({title: res.message,icon: 'none'});							this.info.collect_is = 0;							this.info.collect_count -= 1;						} else {							uni.showToast({title: res.message,icon: 'none'});						}					});				}else{//未收藏（收藏操作					app.$vm.getData({						url: 'News/newsCollect',						that: this,						data: {news_id: this.id},						loading: 1					}).then(res => {						if (res.code == 1) {							uni.showToast({title: res.message,icon: 'none'});							this.info.collect_is = 1;							this.info.collect_count += 1;						} else {							uni.showToast({title: res.message,icon: 'none'});						}					});				}			},			// 评论			bindConfirm(){				console.log(111);				app.$vm.getData({					url: 'News/review',					that: this,					data: {news_id: this.id,content:this.content,pid:''},					loading: 1				}).then(res => {					if (res.code == 1) {						this.loadList(1);						this.info.review_count+=1;					}				})			},			// 分享			shareToFriends() {				let that = this;              				uni.share({					provider: "weixin",					scene: "WXSceneSession",					type: 0,					href: "https://xachongniapp.jucheng01.net/h5/#/?id="+this.id,					title: '西安宠溺宠物信息平台',					success: function(res) {						console.log("success:" + JSON.stringify(res));					},					fail: function(err) {						console.log("fail:" + JSON.stringify(err));					},					complete:function(res){						that.shareShow=false;					}				});							},			//分享朋友圈			shareCircle(){				let that = this;				uni.share({				    provider: "weixin",				    scene: "WXSenceTimeline",				    type: 0,					href: "https://xachongniapp.jucheng01.net/h5/#/?id="+this.id,				    title: "西安宠溺宠物信息平台",				    // summary: "我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！",				    // imageUrl: "https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",				    success: function (res) {				        console.log("success:" + JSON.stringify(res));				    },				    fail: function (err) {				        console.log("fail:" + JSON.stringify(err));				    },					complete:function(res){						that.shareShow=false;					}				});			}		},				onLoad(options){			this.id = options.id;			this.loadDetail();			console.log(123);			this.loadList(1);		},
			onReachBottom(){			this.loadList(2);		},			}</script><style lang="scss" scoped>	.status_bar {		height: var(--status-bar-height);		width: 100%;		background-color: #fff;	}		.top_view {		height: var(--status-bar-height);		width: 100%;		position: fixed;		background-color: #fff;		top: 0;		z-index: 999;	}</style><style scoped>	.back-box .icon-un-return-o{		font-size: 44upx;		color: #333333;	}	.top{		padding: 30upx 0upx 18upx 30upx;		height: 88upx;		line-height: 88upx;		position: fixed;		align-items: center;		width: 100%;		z-index: 999;		border-radius: 0upx!important;	}	.container{		background:#fff;		min-height: 100vh;		padding-bottom: 120upx;	}	.c_00{		color:#000000;	}	.p_tb_40{		padding-top:40upx;		padding-bottom: 40upx;	}	.head{		width: 70upx;		height: 70upx;		border-radius: 50%;	}	.shadow{		box-shadow:inset 0px 15px 10px -15px rgba(0,0,0,0.1);		position: relative;		padding-top: 128upx;		/* margin-top: 88upx; */	}	swiper,.swiper-box,.swiper-box image{	    width:750upx;	    height:500upx;	}	.change_img,.change_img2{		position: absolute;		bottom: 60upx;		left: calc(50% - 100upx);		width:200upx;		height:50upx;		text-indent: 15upx;		text-align: center;		line-height: 50upx;		/* background: red; */		background:rgba(0,0,0,0.03);		border-radius:25upx;		border:3upx solid rgba(255,255,255,1);				background: pink; 		/* bottom: -80upx; */	}	.change_img2{		bottom: 100upx;	}	.other_btn{		width: 100upx;		bottom: 60upx;		left: 50%;		background:rgba(0,0,0,0.03);		color: #fff;		border-radius:25upx;		border:3upx solid rgba(255,255,255,1);	}	.change_img view{		width: 100upx;	}	.bg_ff{		background: #fff;		border-radius: 25upx;	}	.title{		color: #414852;		margin-top:25upx;		line-height: 40upx;	}	.topic{		color: #989BF9;		line-height: 40upx;	}	.c_A4A9B3{		color: #A4A9B3;	}	.c_414852{		color: #414852;	}	.line-35{		line-height: 35upx;	}	.line-40{		line-height: 40upx;	}	.comment_item{		padding-top: 30upx;		padding-bottom: 22upx;	}	.bg_f7{		line-height: 70upx;		height: 70upx;		padding: 0upx 22upx;	}	.ect{		margin: 0upx 5upx;	}	.c_989BF9{		color: #989BF9;	}	.describe{		padding-bottom:20upx;	}	.bb_ed{		border-bottom: 1upx solid #ededed;	}	.comment_input{		width:420upx;		height:65upx;		line-height: 65upx;		background:rgba(250,250,250,1);		border-radius:33upx;		padding: 0px 30upx;	}	.footer{		width: 100%;		padding: 16upx 30upx;		position: fixed;		/* box-shadow:0px 15px 5px -15px rgba(0,0,0,0.1); */		box-shadow:0px 15px 5px -15px red;		background-color: #fff;		bottom: 0upx;	}	.footer iconfont{		font-size: 40upx;		color: #1A1A1A;	}	.fs_44.iconfont{		font-size: 44upx;	}	.fs_22.iconfont{		font-size: 22upx;	}	.share{		height: 100upx;		line-height: 100upx;		padding: 0upx 35upx;		text-align: right;	}	.fs_44.iconfont{		font-size: 44upx;	}	.share_bg{		position: fixed;		top: 0;		bottom: 0;		left: 0;		right: 0;		background:rgba(0,0,0,.6);		z-index: 3;		/* opacity:0.6; */	}	.share_btn{		position: fixed;		bottom: 0;		width:750upx;		height:340upx;		padding-top: 45upx;		background:rgba(255,255,255,1);		border-radius:20upx 20upx 0upx 0upx;		z-index: 4;	}	.share_btn image{		width: 80upx;		height: 80upx;		margin-bottom: 5;	}	.comment_btn{		width: 200upx;		height:60upx;		line-height: 60upx;		background:linear-gradient(90deg,rgba(208,164,245,1) 0%,rgba(255,175,220,1) 100%);		box-shadow:0upx 6upx 8upx 0upx rgba(204,132,255,0.24);		border-radius:38upx;	}	.cover-item{		width: 100upx;		/* position: absolute; */		/* flex: 1; */		line-height: 50upx;		/* z-index: 1000007; */	}	.change_img_view{		margin-left: calc(50% - 100upx);		width:200upx;		height:50upx;		text-align: center;		line-height: 50upx;		background:rgba(0,0,0,0.6);		border-radius:25upx;		border:3upx solid rgba(255,255,255,1);
		margin-top: 15px;	}	.change_img_view view{		width: 100upx;		text-align: center;	}
	.label_items{
		margin-right: 5upx;
	}</style>